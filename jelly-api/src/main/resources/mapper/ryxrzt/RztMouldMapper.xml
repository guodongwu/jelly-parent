<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ryx.ryxrzt.mapper.RztMouldMapper">
  <resultMap id="BaseResultMap" type="com.ryx.ryxrzt.entity.RztMould">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-03-20 14:56:57.
    -->
    <result column="RULE_NUM" jdbcType="VARCHAR" property="ruleNum" />
    <result column="RULE_ID" jdbcType="VARCHAR" property="ruleId" />
    <result column="AGENCY_ID" jdbcType="VARCHAR" property="agencyId" />
    <result column="DEALTYPE_ID" jdbcType="VARCHAR" property="dealtypeId" />
    <result column="SPLITTING_MODE" jdbcType="VARCHAR" property="splittingMode" />
    <result column="SPLITTING_REGIONMODE" jdbcType="VARCHAR" property="splittingRegionmode" />
    <result column="RULEBEGIN" jdbcType="DECIMAL" property="rulebegin" />
    <result column="RULEEND" jdbcType="DECIMAL" property="ruleend" />
    <result column="RULEVALUE" jdbcType="DECIMAL" property="rulevalue" />
    <result column="VALIDITY_DATE" jdbcType="VARCHAR" property="validityDate" />
    <result column="CREATEID" jdbcType="VARCHAR" property="createid" />
    <result column="CREATEDT" jdbcType="VARCHAR" property="createdt" />
    <result column="RULEREM" jdbcType="VARCHAR" property="rulerem" />
    <result column="MOULD_NAME" jdbcType="VARCHAR" property="mouldName" />
    <result column="BATCH_ID" jdbcType="VARCHAR" property="batchId" />
    <result column="MODIFY_TYPE" jdbcType="VARCHAR" property="modifyType" />
    <result column="DELAY" jdbcType="VARCHAR" property="delay" />
    <result column="SEQUENCE_ID" jdbcType="VARCHAR" property="sequenceId" />
    <result column="RULE_NAME_ID" jdbcType="VARCHAR" property="ruleNameId" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-03-20 14:56:57.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-03-20 14:56:57.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-03-20 14:56:57.
    -->
    RULE_NUM, RULE_ID, AGENCY_ID, DEALTYPE_ID, SPLITTING_MODE, SPLITTING_REGIONMODE, 
    RULEBEGIN, RULEEND, RULEVALUE, VALIDITY_DATE, CREATEID, CREATEDT, RULEREM, MOULD_NAME, 
    BATCH_ID, MODIFY_TYPE, DELAY, SEQUENCE_ID, RULE_NAME_ID
  </sql>
  <select id="selectByExample" parameterType="com.ryx.ryxrzt.entity.RztMouldExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-03-20 14:56:57.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from RZT_MOULD
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <insert id="insert" parameterType="com.ryx.ryxrzt.entity.RztMould">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-03-20 14:56:57.
    -->
    insert into RZT_MOULD (RULE_NUM, RULE_ID, AGENCY_ID,
      DEALTYPE_ID, SPLITTING_MODE, SPLITTING_REGIONMODE, 
      RULEBEGIN, RULEEND, RULEVALUE, 
      VALIDITY_DATE, CREATEID, CREATEDT, 
      RULEREM, MOULD_NAME, BATCH_ID, 
      MODIFY_TYPE, DELAY, SEQUENCE_ID, 
      RULE_NAME_ID)
    values (#{ruleNum,jdbcType=VARCHAR}, #{ruleId,jdbcType=VARCHAR}, #{agencyId,jdbcType=VARCHAR}, 
      #{dealtypeId,jdbcType=VARCHAR}, #{splittingMode,jdbcType=VARCHAR}, #{splittingRegionmode,jdbcType=VARCHAR}, 
      #{rulebegin,jdbcType=DECIMAL}, #{ruleend,jdbcType=DECIMAL}, #{rulevalue,jdbcType=DECIMAL}, 
      #{validityDate,jdbcType=VARCHAR}, #{createid,jdbcType=VARCHAR}, #{createdt,jdbcType=VARCHAR}, 
      #{rulerem,jdbcType=VARCHAR}, #{mouldName,jdbcType=VARCHAR}, #{batchId,jdbcType=VARCHAR}, 
      #{modifyType,jdbcType=VARCHAR}, #{delay,jdbcType=VARCHAR}, #{sequenceId,jdbcType=VARCHAR}, 
      #{ruleNameId,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.ryx.ryxrzt.entity.RztMould">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on 2019-03-20 14:56:57.
    -->
    insert into RZT_MOULD
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="ruleNum != null">
        RULE_NUM,
      </if>
      <if test="ruleId != null">
        RULE_ID,
      </if>
      <if test="agencyId != null">
        AGENCY_ID,
      </if>
      <if test="dealtypeId != null">
        DEALTYPE_ID,
      </if>
      <if test="splittingMode != null">
        SPLITTING_MODE,
      </if>
      <if test="splittingRegionmode != null">
        SPLITTING_REGIONMODE,
      </if>
      <if test="rulebegin != null">
        RULEBEGIN,
      </if>
      <if test="ruleend != null">
        RULEEND,
      </if>
      <if test="rulevalue != null">
        RULEVALUE,
      </if>
      <if test="validityDate != null">
        VALIDITY_DATE,
      </if>
      <if test="createid != null">
        CREATEID,
      </if>
      <if test="createdt != null">
        CREATEDT,
      </if>
      <if test="rulerem != null">
        RULEREM,
      </if>
      <if test="mouldName != null">
        MOULD_NAME,
      </if>
      <if test="batchId != null">
        BATCH_ID,
      </if>
      <if test="modifyType != null">
        MODIFY_TYPE,
      </if>
      <if test="delay != null">
        DELAY,
      </if>
      <if test="sequenceId != null">
        SEQUENCE_ID,
      </if>
      <if test="ruleNameId != null">
        RULE_NAME_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="ruleNum != null">
        #{ruleNum,jdbcType=VARCHAR},
      </if>
      <if test="ruleId != null">
        #{ruleId,jdbcType=VARCHAR},
      </if>
      <if test="agencyId != null">
        #{agencyId,jdbcType=VARCHAR},
      </if>
      <if test="dealtypeId != null">
        #{dealtypeId,jdbcType=VARCHAR},
      </if>
      <if test="splittingMode != null">
        #{splittingMode,jdbcType=VARCHAR},
      </if>
      <if test="splittingRegionmode != null">
        #{splittingRegionmode,jdbcType=VARCHAR},
      </if>
      <if test="rulebegin != null">
        #{rulebegin,jdbcType=DECIMAL},
      </if>
      <if test="ruleend != null">
        #{ruleend,jdbcType=DECIMAL},
      </if>
      <if test="rulevalue != null">
        #{rulevalue,jdbcType=DECIMAL},
      </if>
      <if test="validityDate != null">
        #{validityDate,jdbcType=VARCHAR},
      </if>
      <if test="createid != null">
        #{createid,jdbcType=VARCHAR},
      </if>
      <if test="createdt != null">
        #{createdt,jdbcType=VARCHAR},
      </if>
      <if test="rulerem != null">
        #{rulerem,jdbcType=VARCHAR},
      </if>
      <if test="mouldName != null">
        #{mouldName,jdbcType=VARCHAR},
      </if>
      <if test="batchId != null">
        #{batchId,jdbcType=VARCHAR},
      </if>
      <if test="modifyType != null">
        #{modifyType,jdbcType=VARCHAR},
      </if>
      <if test="delay != null">
        #{delay,jdbcType=VARCHAR},
      </if>
      <if test="sequenceId != null">
        #{sequenceId,jdbcType=VARCHAR},
      </if>
      <if test="ruleNameId != null">
        #{ruleNameId,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="upBatchMould" parameterType="java.util.List">
    <foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";">
    UPDATE RZT_MOULD
    <set>

      <if test="item.rulevalue != null">
        RULEVALUE = #{item.rulevalue},
      </if>
      <if test="item.mouldName != null">
        MOULD_NAME = #{item.mouldName},
      </if>
    </set>
    WHERE  AGENCY_ID = #{item.agencyId} and RULE_ID= #{item.ruleId} and SEQUENCE_ID =#{item.sequenceId}
    </foreach>
  </update>
  <insert id="insertBatch" parameterType="java.util.List" useGeneratedKeys="false">
      INSERT ALL
      <foreach collection="list" index="index" item="item">
        INTO RZT_MOULD(
          RULE_ID,
          AGENCY_ID,
          BATCH_ID,
          DEALTYPE_ID,
          SPLITTING_MODE,
          SPLITTING_REGIONMODE,
          RULEBEGIN,
          RULEEND,
          RULE_NUM,
          RULEVALUE,
          MOULD_NAME,
          MODIFY_TYPE,
          DELAY,
          SEQUENCE_ID)
          VALUES
          (#{item.ruleId},
          #{item.agencyId},#{item.batchId},
          #{item.dealtypeId},#{item.splittingMode},
          #{item.splittingRegionmode},
          #{item.rulebegin},#{item.ruleend},#{item.ruleNum},
          #{item.rulevalue},#{item.mouldName},#{item.modifyType},
          #{item.delay},#{item.sequenceId}
        )
      </foreach>
      SELECT 1 FROM DUAL
  </insert>
  <delete id="deleteMould" parameterType="java.util.Map">
    delete from RZT_MOULD WHERE RULE_ID = #{ruleId}  AND AGENCY_ID = #{agencyId}
  </delete>
  <insert id="addAgencyMould">
    INSERT INTO RZT_MOULD (RULE_ID, AGENCY_ID, BATCH_ID, DEALTYPE_ID, SPLITTING_MODE, SPLITTING_REGIONMODE, RULEBEGIN, RULEEND, CREATEID, CREATEDT, RULEREM, RULE_NUM, RULEVALUE, VALIDITY_DATE, MOULD_NAME,RULE_NAME_ID,MODIFY_TYPE,DELAY,SEQUENCE_ID)
    SELECT #{id}, #{childAgencyId}, BATCH_ID, DEALTYPE_ID, SPLITTING_MODE, SPLITTING_REGIONMODE, RULEBEGIN, RULEEND, CREATEID, to_char(sysdate,'yyyy-MM-dd HH:mm:ss'), RULEREM, RULE_NUM, RULEVALUE, VALIDITY_DATE, #{mouldName},RULE_NAME_ID,MODIFY_TYPE,DELAY,SEQUENCE_ID from RZT_MOULD where  AGENCY_ID = #{agencyId} AND RULE_ID =#{ruleId}
  </insert>
</mapper>